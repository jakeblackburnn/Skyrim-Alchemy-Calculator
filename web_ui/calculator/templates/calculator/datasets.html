{% extends "calculator/base.html" %}

{% block content %}
<h2 class="section-title">Skyrim Alchemy Datasets</h2>

<div style="background-color: #f0ede5; padding: 15px; border-radius: 5px; margin-bottom: 30px; border-left: 4px solid #5b9bd5;">
    <p style="color: #666666;">
        Found an issue with the data? Please report it on our
        <a href="https://github.com/yourusername/skyrim-alchemy-calculator/issues" style="color: #5b9bd5; text-decoration: underline;">GitHub Issues</a> page.
    </p>
</div>

<div style="margin-bottom: 40px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
        <h3 style="color: #5b9bd5;">Ingredients Dataset ({{ ingredients|length }} total)</h3>
        <a href="{% url 'calculator:download_ingredients' %}" style="
            color: #5b9bd5;
            text-decoration: underline;
            font-size: 0.9em;
        ">Download CSV</a>
    </div>

    <div style="background-color: #ffffff; padding: 20px; border-radius: 5px; overflow-x: auto;">
        {% if ingredients %}
        <table style="width: 100%; border-collapse: collapse; font-size: 0.9em;">
            <thead>
                <tr style="border-bottom: 2px solid #5b9bd5;">
                    <th style="text-align: left; padding: 10px; color: #5b9bd5;">Ingredient</th>
                    <th style="text-align: left; padding: 10px; color: #5b9bd5;">Effect 1</th>
                    <th style="text-align: left; padding: 10px; color: #5b9bd5;">Effect 2</th>
                    <th style="text-align: left; padding: 10px; color: #5b9bd5;">Effect 3</th>
                    <th style="text-align: left; padding: 10px; color: #5b9bd5;">Effect 4</th>
                    <th style="text-align: left; padding: 10px; color: #5b9bd5;">Weight</th>
                    <th style="text-align: left; padding: 10px; color: #5b9bd5;">Value</th>
                </tr>
            </thead>
            <tbody>
                {% for ingredient in ingredients %}
                <tr style="border-bottom: 1px solid #e0ddd5;">
                    <td style="padding: 10px;">{{ ingredient.name }}</td>
                    <td style="padding: 10px; color: #666666;">{{ ingredient.effects.0 }}</td>
                    <td style="padding: 10px; color: #666666;">{{ ingredient.effects.1 }}</td>
                    <td style="padding: 10px; color: #666666;">{{ ingredient.effects.2 }}</td>
                    <td style="padding: 10px; color: #666666;">{{ ingredient.effects.3 }}</td>
                    <td style="padding: 10px; color: #666666;">{{ ingredient.weight }}</td>
                    <td style="padding: 10px; color: #666666;">{{ ingredient.value }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Loading ingredients dataset...</p>
        </div>
        {% endif %}
    </div>
</div>

<div>
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
        <h3 style="color: #5b9bd5;">Effects Dataset ({{ effects|length }} total)</h3>
        <a href="{% url 'calculator:download_effects' %}" style="
            color: #5b9bd5;
            text-decoration: underline;
            font-size: 0.9em;
        ">Download CSV</a>
    </div>

    <div style="background-color: #ffffff; padding: 20px; border-radius: 5px; overflow-x: auto;">
        {% if effects %}
        <table style="width: 100%; border-collapse: collapse; font-size: 0.9em;">
            <thead>
                <tr style="border-bottom: 2px solid #5b9bd5;">
                    <th style="text-align: left; padding: 10px; color: #5b9bd5;">Effect Name</th>
                    <th style="text-align: left; padding: 10px; color: #5b9bd5;">Base Cost</th>
                    <th style="text-align: left; padding: 10px; color: #5b9bd5;">Type</th>
                    <th style="text-align: left; padding: 10px; color: #5b9bd5;">Is Beneficial</th>
                    <th style="text-align: left; padding: 10px; color: #5b9bd5;">Variable Duration</th>
                </tr>
            </thead>
            <tbody>
                {% for effect in effects %}
                <tr style="border-bottom: 1px solid #e0ddd5;">
                    <td style="padding: 10px;">{{ effect.name }}</td>
                    <td style="padding: 10px; color: #666666;">{{ effect.base_cost }}</td>
                    <td style="padding: 10px; color: #666666;">{{ effect.effect_type }}</td>
                    <td style="padding: 10px; color: #666666;">{{ effect.is_beneficial }}</td>
                    <td style="padding: 10px; color: #666666;">{{ effect.varies_duration }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Loading effects dataset...</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
