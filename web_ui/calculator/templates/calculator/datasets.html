{% extends "calculator/base.html" %}

{% block content %}
<h2 class="section-title">Skyrim Alchemy Datasets</h2>

<div style="background-color: #3a3a3a; padding: 15px; border-radius: 5px; margin-bottom: 30px; border-left: 4px solid #4a9eff;">
    <p style="color: #b0b0b0;">
        Found an issue with the data? Please report it on our
        <a href="https://github.com/yourusername/skyrim-alchemy-calculator/issues" style="color: #4a9eff; text-decoration: none;">GitHub Issues</a> page.
    </p>
</div>

<div style="margin-bottom: 40px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
        <h3 style="color: #4a9eff;">Ingredients Dataset ({{ ingredients|length }} total)</h3>
        <a href="{% url 'calculator:download_ingredients' %}" style="
            padding: 8px 16px;
            background-color: #4a9eff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-size: 0.9em;
        ">Download CSV</a>
    </div>

    <div style="background-color: #3a3a3a; padding: 20px; border-radius: 5px; overflow-x: auto;">
        {% if ingredients %}
        <table style="width: 100%; border-collapse: collapse; font-size: 0.9em;">
            <thead>
                <tr style="border-bottom: 2px solid #4a9eff;">
                    <th style="text-align: left; padding: 10px; color: #4a9eff;">Ingredient</th>
                    <th style="text-align: left; padding: 10px; color: #4a9eff;">Effect 1</th>
                    <th style="text-align: left; padding: 10px; color: #4a9eff;">Effect 2</th>
                    <th style="text-align: left; padding: 10px; color: #4a9eff;">Effect 3</th>
                    <th style="text-align: left; padding: 10px; color: #4a9eff;">Effect 4</th>
                    <th style="text-align: left; padding: 10px; color: #4a9eff;">Weight</th>
                    <th style="text-align: left; padding: 10px; color: #4a9eff;">Value</th>
                </tr>
            </thead>
            <tbody>
                {% for ingredient in ingredients %}
                <tr style="border-bottom: 1px solid #555;">
                    <td style="padding: 10px;">{{ ingredient.name }}</td>
                    <td style="padding: 10px; color: #888;">{{ ingredient.effects.0 }}</td>
                    <td style="padding: 10px; color: #888;">{{ ingredient.effects.1 }}</td>
                    <td style="padding: 10px; color: #888;">{{ ingredient.effects.2 }}</td>
                    <td style="padding: 10px; color: #888;">{{ ingredient.effects.3 }}</td>
                    <td style="padding: 10px; color: #888;">{{ ingredient.weight }}</td>
                    <td style="padding: 10px; color: #888;">{{ ingredient.value }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Loading ingredients dataset...</p>
        </div>
        {% endif %}
    </div>
</div>

<div>
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
        <h3 style="color: #4a9eff;">Effects Dataset ({{ effects|length }} total)</h3>
        <a href="{% url 'calculator:download_effects' %}" style="
            padding: 8px 16px;
            background-color: #4a9eff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-size: 0.9em;
        ">Download CSV</a>
    </div>

    <div style="background-color: #3a3a3a; padding: 20px; border-radius: 5px; overflow-x: auto;">
        {% if effects %}
        <table style="width: 100%; border-collapse: collapse; font-size: 0.9em;">
            <thead>
                <tr style="border-bottom: 2px solid #4a9eff;">
                    <th style="text-align: left; padding: 10px; color: #4a9eff;">Effect Name</th>
                    <th style="text-align: left; padding: 10px; color: #4a9eff;">Base Cost</th>
                    <th style="text-align: left; padding: 10px; color: #4a9eff;">Type</th>
                    <th style="text-align: left; padding: 10px; color: #4a9eff;">Is Beneficial</th>
                    <th style="text-align: left; padding: 10px; color: #4a9eff;">Variable Duration</th>
                </tr>
            </thead>
            <tbody>
                {% for effect in effects %}
                <tr style="border-bottom: 1px solid #555;">
                    <td style="padding: 10px;">{{ effect.name }}</td>
                    <td style="padding: 10px; color: #888;">{{ effect.base_cost }}</td>
                    <td style="padding: 10px; color: #888;">{{ effect.effect_type }}</td>
                    <td style="padding: 10px; color: #888;">{{ effect.is_beneficial }}</td>
                    <td style="padding: 10px; color: #888;">{{ effect.varies_duration }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Loading effects dataset...</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
